(this.webpackJsonpcallhandlrr=this.webpackJsonpcallhandlrr||[]).push([[0],{354:function(t,e,n){},355:function(t,e,n){},419:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(16),s=n.n(o),c=(n(354),n(14)),i=n.n(c),u=n(23),l=n(108),p=n(109),h=n(198),f=n(195),d=(n(355),function(){function t(){Object(l.a)(this,t)}return Object(p.a)(t,[{key:"getAllCustomers",value:function(){var t=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8010/proxy/api/Customer").then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://techtestcalllogapi.azurewebsites.net/api/Customer/"+e).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCustomerCalls",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8010/proxy/api/Call/customer/"+e).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCustomerStats",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8010/proxy/api/Statistics/"+e).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCustomerApps",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8010/proxy/api/Application/customer/"+e).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"updateCustomerApps",value:function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={name:e,description:a,hasSupportContract:n,customerId:r},t.next=3,fetch("http://localhost:8010/proxy/api/Application/customer/"+r,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"patch",body:JSON.stringify(o)}).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()},{key:"UpdateCall",value:function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,e.application,e.description,e.status,t.next=6,fetch("http://localhost:8010/proxy/api/Call/customer/"+n).then((function(t){return t.json()})).then((function(t){return console.log("\ud83d\ude80 ~ data",t),t})).catch((function(t){console.log(t)}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}()),j=n(120),m=n(97),b=n(61),C=n(91),v=n.n(C),w=n(15),O=function(t){var e=a.useState([]),n=Object(b.a)(e,2),r=n[0],o=n[1],s=function(t){var e=a.useState(t),n=Object(b.a)(e,2),r=n[0],o=n[1];return[r,a.useCallback((function(){return o((function(t){return!t}))}),[o])]}(!1),c=Object(b.a)(s,2),l=c[0],p=c[1],h=function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Updating",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new d).getCustomerCalls(t.Customer.id).then((function(t){console.log("\ud83d\ude80 ~ response",t);var e=[];t.forEach((function(t){e.push({id:t.id,status:t.status.description,application:t.application.name,description:t.description})})),o(e),p()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){l||f()}),[l]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"Tablehost",children:Object(w.jsx)(v.a,{title:t.Customer.name+" - Calls",options:{pageSize:10},columns:[{title:"Call Id",field:"id"},{title:"Status",field:"status"},{title:"Application",field:"application"},{title:"Description",field:"description"}],data:r,editable:{onRowUpdate:function(t,e){return new Promise((function(n,a){setTimeout((function(){var a=Object(m.a)(r);e.tableData.id;o(Object(m.a)(a)),h(t),n(!0)}),1e3)}))}}})})})},x=function(t){var e=a.useState([]),n=Object(b.a)(e,2),r=n[0],o=n[1],s=function(t){var e=a.useState(t),n=Object(b.a)(e,2),r=n[0],o=n[1];return[r,a.useCallback((function(){return o((function(t){return!t}))}),[o])]}(!1),c=Object(b.a)(s,2),l=c[0],p=c[1],h=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new d).getCustomerStats(t.Customer.id).then((function(t){console.log("\ud83d\ude80 ~ response",t);var e=t,n=[];n.push({id:e.id,openCallsTotal:e.openCalls.totalCalls,openCallsresponded:e.openCalls.responded,openCallsawaitingResponse:e.openCalls.awaitingResponse,closedCallsTotal:e.closedCalls.totalCalls,closedCallssatisfactory:e.closedCalls.satisfactory,closedCallsunsatisfactory:e.closedCalls.unsatisfactory,month1:e.lastThreeMonths.month1,month2:e.lastThreeMonths.month2,month3:e.lastThreeMonths.month3}),o(n),p()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){l||h()}),[l]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"Tablehost",children:Object(w.jsx)(v.a,{title:t.Customer.name+" - Statistics",options:{pageSize:1},columns:[{title:"Open - Total",field:"openCallsTotal"},{title:"Open - Responded",field:"openCallsresponded"},{title:"Open - Awaiting Response",field:"openCallsawaitingResponse"},{title:"Closed - Total",field:"closedCallsTotal"},{title:"Closed - Satisfactory",field:"closedCallssatisfactory"},{title:"Closed - Unsatisfactory",field:"closedCallsunsatisfactory"},{title:"Month1",field:"month1"},{title:"Month2",field:"month2"},{title:"Month3",field:"month3"}],data:r})})})},g=function(t){var e=a.useState([]),n=Object(b.a)(e,2),r=n[0],o=n[1],s=function(t){var e=a.useState(t),n=Object(b.a)(e,2),r=n[0],o=n[1];return[r,a.useCallback((function(){return o((function(t){return!t}))}),[o])]}(!1),c=Object(b.a)(s,2),l=c[0],p=c[1],h=function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Adding",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(i.a.mark((function e(n){var a,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,r=n.description,o=n.hasSupportContract,s=t.Customer.id,e.next=6,(new d).updateCustomerApps(a,o,r,s).then((function(t){console.log("\ud83d\ude80 ~ response",t)}));case 6:console.log("Updating",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new d).getCustomerApps(t.Customer.id).then((function(t){console.log("\ud83d\ude80 ~ response",t);var e=[];t.forEach((function(t){var n=new Date(t.installationDate).toLocaleDateString();e.push({id:t.id,name:t.name,hasSupportContract:t.hasSupportContract,installationDate:n,description:t.description})})),o(e),p()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){l||j()}),[l]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"Tablehost",children:Object(w.jsx)(v.a,{title:t.Customer.name+" - Applications",options:{pageSize:5},columns:[{title:"Application",field:"name"},{title:"Support Contract?",field:"hasSupportContract"},{title:"Installation Date",field:"installationDate"},{title:"Application Type",field:"description"}],data:r,editable:{onRowAdd:function(t){return new Promise((function(e,n){setTimeout((function(){o([].concat(Object(m.a)(r),[t])),h(t),e(!0)}),1e3)}))},onRowUpdate:function(t,e){return new Promise((function(n,a){setTimeout((function(){var a=Object(m.a)(r);a[e.tableData.id]=t,o(Object(m.a)(a)),f(t),n(!0)}),1e3)}))}}})})})},k=n(83),y=n(317),D=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).state={showData:!1,showData2:!1,showData3:!1},r.handleClick=r.handleClick.bind(Object(j.a)(r)),r.handleClick2=r.handleClick2.bind(Object(j.a)(r)),r.handleClick3=r.handleClick3.bind(Object(j.a)(r)),r}return Object(p.a)(n,[{key:"handleClick",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),console.log("The link was clicked."),this.setState((function(t){return{showData:!t.showData,showData2:!1,showData3:!1}})),console.log("\ud83d\ude80 ~ this.state",this.state);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleClick2",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),console.log("link 2 was clicked."),this.setState((function(t){return{showData2:!t.showData2,showData:!1,showData3:!1}})),console.log("\ud83d\ude80 ~ this.state",this.state);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleClick3",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),console.log("link 3 was clicked."),this.setState((function(t){return{showData3:!t.showData3,showData2:!1,showData:!1}})),console.log("\ud83d\ude80 ~ this.state",this.state);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"Customer",children:[Object(w.jsx)("div",{className:"customerName",children:Object(w.jsx)(k.a,{variant:"h5",component:"h2",children:this.props.Customer.name})}),Object(w.jsxs)("div",{className:"actionButtons",children:[Object(w.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.handleClick,children:this.state.showData?"Hide Calls":"View Calls"}),Object(w.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.handleClick2,children:this.state.showData2?"Hide Stats":"View Stats"}),Object(w.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.handleClick3,children:this.state.showData3?"Hide Apps":"View Apps"})]}),1==this.state.showData?Object(w.jsx)(O,{Customer:this.props.Customer}):Object(w.jsx)("div",{}),1==this.state.showData2?Object(w.jsx)(x,{Customer:this.props.Customer}):Object(w.jsx)("div",{}),1==this.state.showData3?Object(w.jsx)(g,{Customer:this.props.Customer}):Object(w.jsx)("div",{})]})}}]),n}(a.Component),S=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).services=new d,t.state={Customers:[]},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(u.a)(i.a.mark((function t(){var e=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.getAllCustomers().then((function(t){console.log("\ud83d\ude80 ~ data",t),e.setState({Customers:t})}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsx)("div",{className:"App",children:this.state.Customers?this.state.Customers.map((function(t,e){return console.log("\ud83d\ude80 ~ item",t),t?t.name:null,Object(w.jsx)("div",{children:Object(w.jsx)(D,{Customer:t})})})):Object(w.jsx)("div",{})})}}]),n}(a.Component),A=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,824)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),o(t),s(t)}))};s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(S,{})}),document.getElementById("root")),A()}},[[419,1,3]]]);
//# sourceMappingURL=main.302f63fc.chunk.js.map